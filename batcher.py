#!/usr/bin/env python
import subprocess

paires = [
    # "1INCH/USDT",
    # "AAVE/USDT",
    # "ADA/USDT",
    # "AGIX/USDT",
    # "AGLD/USDT",
    # "ALGO/USDT",
    # "ANKR/USDT",
    # "APE/USDT",
    # "APT/USDT",
    # "ARB/USDT",
    # "ARKM/USDT",
    # "ATOM/USDT",
    # "AVAX/USDT",
    # "AXS/USDT",
    # "BCH/USDT",
    # "BTC/USDT",
    # "CFX/USDT",
    # "CHZ/USDT",
    # "CITY/USDT",
    # "CLV/USDT",
    # "COMBO/USDT",
    # "COMP/USDT",
    # "DENT/USDT",
    # "DOGE/USDT",
    # "DOT/USDT",
    # "DYDX/USDT",
    # "EDU/USDT",
    # "EGLD/USDT",
    # "ENJ/USDT",
    # "EOS/USDT",
    # "ETC/USDT",
    # "ETH/USDT",
    # "EUR/USDT",
    # "FET/USDT",
    # "FIL/USDT",
    # "FLOW/USDT",
    # "FTM/USDT",
    # "GALA/USDT",
    # "GMT/USDT",
    # "GMX/USDT",
    # "GRT/USDT",
    # "HBAR/USDT",
    # "ICP/USDT",
    # "ID/USDT",
    # "INJ/USDT",
    # "KEY/USDT",
    # "LDO/USDT",
    # "LINA/USDT",
    # "LINK/USDT",
    # "LQTY/USDT",
    # "LTC/USDT",
    # "LUNA/USDT",
    # "LUNC/USDT",
    # "MANA/USDT",
    # "MASK/USDT",
    # "MATIC/USDT",
    # "MAV/USDT",
    # "MBL/USDT",
    # "MDT/USDT",
    # "MKR/USDT",
    # "MULTI/USDT",
    # "NEAR/USDT",
    # "OGN/USDT",
    # "ONG/USDT",
    # "OP/USDT",
    # "OXT/USDT",
    # "PEPE/USDT",
    # "PLA/USDT",
    # "QNT/USDT",
    # "RDNT/USDT",
    # "REN/USDT",
    # "RNDR/USDT",
    # "ROSE/USDT",
    # "SAND/USDT",
    # "SHIB/USDT",
    # "SNX/USDT",
    # "SOL/USDT",
    # "STG/USDT",
    # "STMX/USDT",
    # "STPT/USDT",
    # "STX/USDT",
    # "SUI/USDT",
    # "THETA/USDT",
    # "TOMO/USDT",
    # "TRX/USDT",
    # "UNI/USDT",
    # "VET/USDT",
    # "WAVES/USDT",
    # "WAXP/USDT",
    # "WRX/USDT",
    # "XLM/USDT",
    # "XMR/USDT",
    # "XRP/USDT",
    # "XVG/USDT",
    # "ZEC/USDT",
    # "ZEN/USDT",
    # "ZIL/USDT"

    # "SOL/USDT:USDT",
    # "BLZ/USDT:USDT",
    # "RUNE/USDT:USDT",
    # "MATIC/USDT:USDT",
    # "BTC/USDT:USDT",
    # "DOGE/USDT:USDT",
    # "ETH/USDT:USDT",
    # "ADA/USDT:USDT",
    # "BCH/USDT:USDT",
    # "XRP/USDT:USDT",
    # "TOMO/USDT:USDT",
    # "TRB/USDT:USDT",
    # "LTC/USDT:USDT",
    # "1000PEPE/USDT:USDT",
    # "SUI/USDT:USDT",
    # "UNFI/USDT:USDT",
    # "API3/USDT:USDT",
    # "OP/USDT:USDT"

    "1000SHIB/USDT:USDT",
    "1INCH/USDT:USDT",
    "AAVE/USDT:USDT",
    "ACH/USDT:USDT",
    "AGIX/USDT:USDT",
    "ALGO/USDT:USDT",
    "ALICE/USDT:USDT",
    "ALPHA/USDT:USDT",
    "AMB/USDT:USDT",
    "ANKR/USDT:USDT",
    "ANT/USDT:USDT",
    "APE/USDT:USDT",
    "API3/USDT:USDT",
    "APT/USDT:USDT",
    "AR/USDT:USDT",
    "ARB/USDT:USDT",
    "ARPA/USDT:USDT",
    "ASTR/USDT:USDT",
    "ATA/USDT:USDT",
    "ATOM/USDT:USDT",
    "AUDIO/USDT:USDT",
    "AXS/USDT:USDT",
    "BAKE/USDT:USDT",
    "BAL/USDT:USDT",
    "BAND/USDT:USDT",
    "BAT/USDT:USDT",
    "BEL/USDT:USDT",
    "BLZ/USDT:USDT",
    "BNB/USDT:USDT",
    "BNX/USDT:USDT",
    "C98/USDT:USDT",
    "CELO/USDT:USDT",
    "CELR/USDT:USDT",
    "CFX/USDT:USDT",
    "CHR/USDT:USDT",
    "CHZ/USDT:USDT",
    "CKB/USDT:USDT",
    "COMBO/USDT:USDT",
    "COMP/USDT:USDT",
    "COTI/USDT:USDT",
    "CRV/USDT:USDT",
    "CTK/USDT:USDT",
    "CTSI/USDT:USDT",
    "CVX/USDT:USDT",
    "DAR/USDT:USDT",
    "DASH/USDT:USDT",
    "DENT/USDT:USDT",
    "DGB/USDT:USDT",
    "DUSK/USDT:USDT",
    "DYDX/USDT:USDT",
    "EDU/USDT:USDT",
    "EGLD/USDT:USDT",
    "ENJ/USDT:USDT",
    "ENS/USDT:USDT",
    "EOS/USDT:USDT",
    "ETC/USDT:USDT",
    "FET/USDT:USDT",
    "FIL/USDT:USDT",
    "FLM/USDT:USDT",
    "FLOW/USDT:USDT",
    "FTM/USDT:USDT",
    "FXS/USDT:USDT",
    "GAL/USDT:USDT",
    "GALA/USDT:USDT",
    "GMT/USDT:USDT",
    "GMX/USDT:USDT",
    "GRT/USDT:USDT",
    "GTC/USDT:USDT",
    "HBAR/USDT:USDT",
    "HFT/USDT:USDT",
    "HIGH/USDT:USDT",
    "HOOK/USDT:USDT",
    "HOT/USDT:USDT",
    "ICP/USDT:USDT",
    "ICX/USDT:USDT",
    "ID/USDT:USDT",
    "IDEX/USDT:USDT",
    "IMX/USDT:USDT",
    "INJ/USDT:USDT",
    "IOST/USDT:USDT",
    "IOTA/USDT:USDT",
    "IOTX/USDT:USDT",
    "JASMY/USDT:USDT",
    "JOE/USDT:USDT",
    "KAVA/USDT:USDT",
    "KEY/USDT:USDT",
    "KLAY/USDT:USDT",
    "KNC/USDT:USDT",
    "KSM/USDT:USDT",
    "LDO/USDT:USDT",
    "LEVER/USDT:USDT",
    "LINA/USDT:USDT",
    "LIT/USDT:USDT",
    "LPT/USDT:USDT",
    "LQTY/USDT:USDT",
    "LRC/USDT:USDT",
    "MAGIC/USDT:USDT",
    "MANA/USDT:USDT",
    "MASK/USDT:USDT",
    "MAV/USDT:USDT",
    "MDT/USDT:USDT",
    "MINA/USDT:USDT",
    "MKR/USDT:USDT",
    "MTL/USDT:USDT",
    "NEO/USDT:USDT",
    "NEAR/USDT:USDT",
    "NKN/USDT:USDT",
    "NMR/USDT:USDT",
    "OCEAN/USDT:USDT",
    "OGN/USDT:USDT",
    "OMG/USDT:USDT",
    "ONE/USDT:USDT",
    "ONT/USDT:USDT",
    "OP/USDT:USDT",
    "PEOPLE/USDT:USDT",
    "PERP/USDT:USDT",
    "PHB/USDT:USDT",
    "QNT/USDT:USDT",
    "QTUM/USDT:USDT",
    "RAD/USDT:USDT",
    "RDNT/USDT:USDT",
    "REEF/USDT:USDT",
    "REN/USDT:USDT",
    "RLC/USDT:USDT",
    "RNDR/USDT:USDT",
    "ROSE/USDT:USDT",
    "RSR/USDT:USDT",
    "RUNE/USDT:USDT",
    "RVN/USDT:USDT",
    "SAND/USDT:USDT",
    "SFP/USDT:USDT",
    "SKL/USDT:USDT",
    "SNX/USDT:USDT",
    "SPELL/USDT:USDT",
    "SSV/USDT:USDT",
    "STG/USDT:USDT",
    "STMX/USDT:USDT",
    "STORJ/USDT:USDT",
    "STX/USDT:USDT",
    "SUI/USDT:USDT",
    "SUSHI/USDT:USDT",
    "SXP/USDT:USDT",
    "T/USDT:USDT",
    "THETA/USDT:USDT",
    "TLM/USDT:USDT",
    "TOMO/USDT:USDT",
    "TRB/USDT:USDT",
    "TRU/USDT:USDT",
    "UMA/USDT:USDT",
    "UNFI/USDT:USDT",
    "UNI/USDT:USDT",
    "VET/USDT:USDT",
    "WAVES/USDT:USDT",
    "WOO/USDT:USDT",
    "XEM/USDT:USDT",
    "XLM/USDT:USDT",
    "XMR/USDT:USDT",
    "XTZ/USDT:USDT",
    "XVG/USDT:USDT",
    "XVS/USDT:USDT",
    "YFI/USDT:USDT",
    "ZEC/USDT:USDT",
    "ZEN/USDT:USDT",
    "ZIL/USDT:USDT",
    "ZRX/USDT:USDT"
]

intervals = [
    # "20200101-20200201",
    # "20200201-20200301",
    # "20200301-20200401",
    # "20200401-20200501",
    # "20200501-20200601",
    # "20200601-20200701",
    # "20200701-20200801",
    # "20200801-20200901",
    # "20200901-20201001",
    # "20201001-20201101",
    # "20201101-20201201",
    # "20201201-20210101",
    #
    # "20210101-20210201",
    # "20210201-20210301",
    # "20210301-20210401",
    # "20210401-20210501",
    # "20210501-20210601",
    # "20210601-20210701",
    # "20210701-20210801",
    # "20210801-20210901",
    # "20210901-20211001",
    # "20211001-20211101",
    # "20211101-20211201",
    # "20211201-20220101",

    # "20220101-20220201",
    # "20220201-20220301",
    # "20220301-20220401",
    # "20220401-20220501",
    # "20220501-20220601",
    # "20220601-20220701",
    # "20220701-20220801",
    # "20220801-20220901",
    # "20220901-20221001",
    # "20221001-20221101",
    # "20221101-20221201",
    # "20221201-20230101",
    #
    # "20230101-20230201",
    # "20230201-20230301",
    # "20230301-20230401",
    # "20230401-20230501",
    # "20230501-20230601",
    # "20230601-20230701",
    # "20230701-20230801",
    # "20230801-20230901",
    # "20230901-20231001",

    "20230101-20231001",

    # "20230901-20231001",
    # "20231001-20231101",
    # "20231101-20231201",
    # "20231201-20240101",
    #
    # "20240101-20240201",
    # "20240201-20240301",
    # "20240301-20240401",
    # "20240401-20240501",
    # "20240501-20240601",
    # "20240601-20240701",
    # "20240701-20240801",
    # "20240801-20240901",
    # "20240901-20241001",
    # "20241001-20241101",
    # "20241101-20241201",
    # "20241201-20250101",
]

candles = [
    # "1w",
    "1d",
    "12h",
    "8h",
    "4h",
    "2h",
    "1h",
    "30m",
    "15m",
    "5m"
]

title = "|   Strategy |   Entries |   Avg Profit % |   Cum Profit % |   Tot Profit USDT |   Tot Profit % |   Avg Duration |   Win  Draw  Loss  Win% |          Drawdown |"

filtered_lines = []

for candle in candles:
    filtered_lines.append("\n\n")
    filtered_lines.append(candle + "\n")
    filtered_lines.append(title + "\n")

    for interval in intervals:
        command = [
            "freqtrade", "backtesting",
            "--datadir", "user_data/data/binance",
            "--config", "config_futures_top_15m_test.json",
            "--export", "trades",
            "--strategy", "MACDCrossoverWithTrend",
            "--timerange", f"{interval}",
            "-i", f"{candle}"
            # "--enable-protections"
            # "-p", f"{pair}"
        ]
        print(" ".join(command))
        completed_process = subprocess.run(command, stdout=subprocess.PIPE)
        output = completed_process.stdout.decode('utf-8')

        for line in output.split('\n'):
            if "| MACDCrossoverWithTrend |" in line:
                filtered_lines.append(line + " | " + interval)

for line in filtered_lines:
    # Your processing logic here
    print(line)
