#!/usr/bin/env python
import subprocess

paires = [
    # "1INCH/USDT",
    # "AAVE/USDT",
    # "ADA/USDT",
    # "AGIX/USDT",
    # "AGLD/USDT",
    # "ALGO/USDT",
    # "ANKR/USDT",
    # "APE/USDT",
    # "APT/USDT",
    # "ARB/USDT",
    # "ARKM/USDT",
    # "ATOM/USDT",
    # "AVAX/USDT",
    # "AXS/USDT",
    # "BCH/USDT",
    # "BTC/USDT",
    # "CFX/USDT",
    # "CHZ/USDT",
    # "CITY/USDT",
    # "CLV/USDT",
    # "COMBO/USDT",
    # "COMP/USDT",
    # "DENT/USDT",
    # "DOGE/USDT",
    # "DOT/USDT",
    # "DYDX/USDT",
    # "EDU/USDT",
    # "EGLD/USDT",
    # "ENJ/USDT",
    # "EOS/USDT",
    # "ETC/USDT",
    # "ETH/USDT",
    # "EUR/USDT",
    # "FET/USDT",
    # "FIL/USDT",
    # "FLOW/USDT",
    # "FTM/USDT",
    # "GALA/USDT",
    # "GMT/USDT",
    # "GMX/USDT",
    # "GRT/USDT",
    # "HBAR/USDT",
    # "ICP/USDT",
    # "ID/USDT",
    # "INJ/USDT",
    # "KEY/USDT",
    # "LDO/USDT",
    # "LINA/USDT",
    # "LINK/USDT",
    # "LQTY/USDT",
    # "LTC/USDT",
    # "LUNA/USDT",
    # "LUNC/USDT",
    # "MANA/USDT",
    # "MASK/USDT",
    # "MATIC/USDT",
    # "MAV/USDT",
    # "MBL/USDT",
    # "MDT/USDT",
    # "MKR/USDT",
    # "MULTI/USDT",
    # "NEAR/USDT",
    # "OGN/USDT",
    # "ONG/USDT",
    # "OP/USDT",
    # "OXT/USDT",
    # "PEPE/USDT",
    # "PLA/USDT",
    # "QNT/USDT",
    # "RDNT/USDT",
    # "REN/USDT",
    # "RNDR/USDT",
    # "ROSE/USDT",
    # "SAND/USDT",
    # "SHIB/USDT",
    # "SNX/USDT",
    # "SOL/USDT",
    # "STG/USDT",
    # "STMX/USDT",
    # "STPT/USDT",
    # "STX/USDT",
    # "SUI/USDT",
    # "THETA/USDT",
    # "TOMO/USDT",
    # "TRX/USDT",
    # "UNI/USDT",
    # "VET/USDT",
    # "WAVES/USDT",
    # "WAXP/USDT",
    # "WRX/USDT",
    # "XLM/USDT",
    # "XMR/USDT",
    # "XRP/USDT",
    # "XVG/USDT",
    # "ZEC/USDT",
    # "ZEN/USDT",
    # "ZIL/USDT"

    # "SOL/USDT:USDT",
    # "BLZ/USDT:USDT",
    # "RUNE/USDT:USDT",
    # "MATIC/USDT:USDT",
    # "BTC/USDT:USDT",
    # "DOGE/USDT:USDT",
    # "ETH/USDT:USDT",
    # "ADA/USDT:USDT",
    # "BCH/USDT:USDT",
    # "XRP/USDT:USDT",
    # "TOMO/USDT:USDT",
    # "TRB/USDT:USDT",
    # "LTC/USDT:USDT",
    # "1000PEPE/USDT:USDT",
    # "SUI/USDT:USDT",
    # "UNFI/USDT:USDT",
    # "API3/USDT:USDT",
    # "OP/USDT:USDT"

    "REEF/USDT:USDT",
    "STX/USDT:USDT",
    "TOMO/USDT:USDT",
    "MASK/USDT:USDT",
    "CVX/USDT:USDT",
    "PERP/USDT:USDT",
    "LINA/USDT:USDT",
    "TRB/USDT:USDT",
    "RUNE/USDT:USDT",
    "BCH/USDT:USDT",
    "RSR/USDT:USDT",
    "HOOK/USDT:USDT",
    "KNC/USDT:USDT",
    "NEO/USDT:USDT",
    "MAGIC/USDT:USDT",
    "STORJ/USDT:USDT",
    "BAKE/USDT:USDT",
    "GTC/USDT:USDT",
    "GRT/USDT:USDT",
    "MATIC/USDT:USDT"
]

intervals = [
    "20200101-20200201",
    "20200201-20200301",
    "20200301-20200401",
    "20200401-20200501",
    "20200501-20200601",
    "20200601-20200701",
    "20200701-20200801",
    "20200801-20200901",
    "20200901-20201001",
    "20201001-20201101",
    "20201101-20201201",
    "20201201-20210101",

    "20210101-20210201",
    "20210201-20210301",
    "20210301-20210401",
    "20210401-20210501",
    "20210501-20210601",
    "20210601-20210701",
    "20210701-20210801",
    "20210801-20210901",
    "20210901-20211001",
    "20211001-20211101",
    "20211101-20211201",
    "20211201-20220101",

    "20220101-20220201",
    "20220201-20220301",
    "20220301-20220401",
    "20220401-20220501",
    "20220501-20220601",
    "20220601-20220701",
    "20220701-20220801",
    "20220801-20220901",
    "20220901-20221001",
    "20221001-20221101",
    "20221101-20221201",
    "20221201-20230101",

    "20230101-20230201",
    "20230201-20230301",
    "20230301-20230401",
    "20230401-20230501",
    "20230501-20230601",
    "20230601-20230701",
    "20230701-20230801",
    "20230801-20230901"

    "20200101-20230701",

    # "20230901-20231001",
    # "20231001-20231101",
    # "20231101-20231201",
    # "20231201-20240101",
    #
    # "20240101-20240201",
    # "20240201-20240301",
    # "20240301-20240401",
    # "20240401-20240501",
    # "20240501-20240601",
    # "20240601-20240701",
    # "20240701-20240801",
    # "20240801-20240901",
    # "20240901-20241001",
    # "20241001-20241101",
    # "20241101-20241201",
    # "20241201-20250101",
]

title = "|   Strategy |   Entries |   Avg Profit % |   Cum Profit % |   Tot Profit USDT |   Tot Profit % |   Avg Duration |   Win  Draw  Loss  Win% |          Drawdown |"

filtered_lines = []

for pair in paires:
    filtered_lines.append("\n\n")
    filtered_lines.append(pair + "\n")
    filtered_lines.append(title + "\n")

    for interval in intervals:
        command = [
            "freqtrade", "backtesting",
            "--datadir", "user_data/data/binance",
            "--config", "config_binance_secret.json",
            "--export", "trades",
            "--strategy", "FSupertrendStrategy",
            "--timerange", f"{interval}",
            "-i", "2h",
            "--enable-protections",
            "-p", f"{pair}"
        ]
        print(" ".join(command))
        completed_process = subprocess.run(command, stdout=subprocess.PIPE)
        output = completed_process.stdout.decode('utf-8')

        for line in output.split('\n'):
            if "| FSupertrendStrategy |" in line:
                filtered_lines.append(line + " | " + interval)

for line in filtered_lines:
    # Your processing logic here
    print(line)
